#!/usr/bin/env python3
"""
ë™ì˜ì–´ ì‚¬ì „ ëª¨ë“ˆ
í‚¤ì›Œë“œ ê²€ìƒ‰ ì„±ëŠ¥ í–¥ìƒì„ ìœ„í•œ ë™ì˜ì–´ ë§¤í•‘ ì œê³µ
"""

# ë™ì˜ì–´ ì‚¬ì „ (ë©”ì¸ í‚¤ì›Œë“œ -> ë™ì˜ì–´ ë¦¬ìŠ¤íŠ¸)
SYNONYM_DICT = {
    # ì‹ìž¬ë£Œ ë™ì˜ì–´
    "ì˜¬ë¦¬ë¸Œìœ ": ["ì˜¬ë¦¬ë¸Œì˜¤ì¼", "ì—‘ìŠ¤íŠ¸ë¼ë²„ì§„ì˜¬ë¦¬ë¸Œì˜¤ì¼", "EVOO"],
    "ì•„ë³´ì¹´ë„": ["ì•„ë³´ì¹´ë„ì˜¤ì¼"],
    "ë§ˆëŠ˜": ["ë‹¤ì§„ë§ˆëŠ˜", "ë§ˆëŠ˜ê°€ë£¨", "ìƒë§ˆëŠ˜"],
    "ì–‘íŒŒ": ["ë‹¤ì§„ì–‘íŒŒ", "ì–‘íŒŒê°€ë£¨", "ìƒì–‘íŒŒ"],
    "ê³„ëž€": ["ë‹¬ê±€", "ê³„ëž€ì•Œ", "ë‹¬ê±€ì•Œ"],
    "í† ë§ˆí† ": ["ë°©ìš¸í† ë§ˆí† ", "ì²´ë¦¬í† ë§ˆí† "],
    "ì¹˜ì¦ˆ": ["ëª¨ì§œë ë¼", "ì²´ë‹¤ì¹˜ì¦ˆ", "íŒŒë§ˆì‚°ì¹˜ì¦ˆ"],
    "ë² ì´ì»¨": ["ìŠ¤ëª¨í¬ë² ì´ì»¨", "í„°í‚¤ë² ì´ì»¨"],
    "ë²„í„°": ["ë¬´ì—¼ë²„í„°", "ê°€ì—¼ë²„í„°"],
    "ìš°ìœ ": ["ì €ì§€ë°©ìš°ìœ ", "ë¬´ì§€ë°©ìš°ìœ ", "ë‘ìœ "],
    
    # ì¡°ë¦¬ë²• ë™ì˜ì–´
    "ë³¶ìŒ": ["ë³¶ê¸°", "ë³¶ì•„ì„œ", "ë³¶ìŒìš”ë¦¬"],
    "êµ¬ìš´": ["êµ¬ì´", "êµ¬ì›Œì„œ", "êµ¬ìš´ìš”ë¦¬"],
    "ì°œ": ["ì°œê¸°", "ì°œí•´ì„œ", "ì°œìš”ë¦¬"],
    "íŠ€ê¹€": ["íŠ€ê¸°ê¸°", "íŠ€ê²¨ì„œ", "íŠ€ê¹€ìš”ë¦¬"],
    "ìƒëŸ¬ë“œ": ["ìƒëŸ¬ë“œìš”ë¦¬", "ìƒì±„"],
    "ìŠ¤í”„": ["êµ­", "íƒ•", "êµ­ë¬¼"],
    "ìŠ¤í…Œì´í¬": ["êµ¬ì´", "ê·¸ë¦´"],
    "ìŠ¤í¬ëž¨ë¸”": ["ë¶€ì¹˜ê¸°", "ë¶€ì³ì„œ"],
    
    # ë§›/íŠ¹ì„± ë™ì˜ì–´
    "ë§¤ìš´": ["ë§µê²Œ", "ê³ ì¶”ë§›", "ê³ ì¶§ê°€ë£¨ë§›"],
    "ë‹¬ì½¤í•œ": ["ë‹¬ê²Œ", "ë‹¨ë§›", "ì„¤íƒ•ë§›"],
    "ì§ ": ["ì§œê²Œ", "ì†Œê¸ˆë§›"],
    "ì‹ ": ["ì‹œê²Œ", "ì‹ ë§›", "ì‹ì´ˆë§›"],
    "ê³ ì†Œí•œ": ["ê³ ì†Œí•˜ê²Œ", "ì°¸ê¸°ë¦„ë§›", "ë“¤ê¸°ë¦„ë§›"],
    "ì§„í•œ": ["ì§„í•˜ê²Œ", "ì§„í•œë§›"],
    "ë¶€ë“œëŸ¬ìš´": ["ë¶€ë“œëŸ½ê²Œ", "ì—°í•˜ê²Œ"],
    "ë°”ì‚­í•œ": ["ë°”ì‚­í•˜ê²Œ", "í¬ë¦¬ìŠ¤í”¼"],
    
    # ê±´ê°•/ë‹¤ì´ì–´íŠ¸ ê´€ë ¨ ë™ì˜ì–´
    "keto": ["ì¼€í† ", "í‚¤í† ", "í‚¤í† ì œë‹‰"],
    "ì €íƒ„ìˆ˜í™”ë¬¼": ["ì €íƒ„", "ë¡œì¹´ë¸Œ", "ë¡œìš°ì¹´ë¸Œ"],
    "ê³ ë‹¨ë°±": ["ê³ ë‹¨ë°±ì§ˆ", "í”„ë¡œí‹´"],
    "ë‹¤ì´ì–´íŠ¸": ["ë‹¤ì´ì–´íŠ¸ì‹", "ë‹¤ì´ì–´íŠ¸ìš©"],
    "ê±´ê°•": ["ê±´ê°•í•œ", "ê±´ê°•ì‹", "ê±´ê°•ìš©"],
    "ë¬´ì„¤íƒ•": ["ì„¤íƒ•ì—†ëŠ”", "ë‹¹ë¶„ì—†ëŠ”"],
    "ë¬´ì§€ë°©": ["ì§€ë°©ì—†ëŠ”", "ë¡œìš°íŒ»"],
    "ìœ ê¸°ë†": ["ì˜¤ê°€ë‹‰", "ìžì—°ë†"],
    
    # ìš”ë¦¬ ì¢…ë¥˜ ë™ì˜ì–´
    "íŒŒìŠ¤íƒ€": ["ìŠ¤íŒŒê²Œí‹°", "ë©´ìš”ë¦¬"],
    "í”¼ìž": ["í”¼ìžìš”ë¦¬"],
    "ìƒŒë“œìœ„ì¹˜": ["ìƒŒë“œ", "ìƒŒë“œìœ„ì¹˜ìš”ë¦¬"],
    "ìŠ¤ë¬´ë””": ["ìŠ¤ë¬´ë””ìŒë£Œ", "ë“œë§í¬"],
    "ì¼€ì´í¬": ["ì¼€ì´í¬ìš”ë¦¬", "ë””ì €íŠ¸"],
    "ì¿ í‚¤": ["ì¿ í‚¤ìš”ë¦¬", "ê³¼ìž"],
    "ë¹µ": ["ë¹µìš”ë¦¬", "ë² ì´í‚¹"],
    "ê¹€ë°¥": ["ê¹€ë°¥ìš”ë¦¬", "ë¡¤"],
    
    # í•œêµ­ì–´ ì¡°ì‚¬/ì–´ë¯¸ ì •ê·œí™”
    "ê°€": ["ì´", "ì„", "ë¥¼", "ì˜", "ì—", "ì—ì„œ", "ë¡œ", "ìœ¼ë¡œ"],
    "ì´": ["ê°€", "ì„", "ë¥¼", "ì˜", "ì—", "ì—ì„œ", "ë¡œ", "ìœ¼ë¡œ"],
    "ì„": ["ë¥¼", "ê°€", "ì´", "ì˜", "ì—", "ì—ì„œ", "ë¡œ", "ìœ¼ë¡œ"],
    "ë¥¼": ["ì„", "ê°€", "ì´", "ì˜", "ì—", "ì—ì„œ", "ë¡œ", "ìœ¼ë¡œ"],
    "ì˜": ["ê°€", "ì´", "ì„", "ë¥¼", "ì—", "ì—ì„œ", "ë¡œ", "ìœ¼ë¡œ"],
    "ì—": ["ì—ì„œ", "ê°€", "ì´", "ì„", "ë¥¼", "ì˜", "ë¡œ", "ìœ¼ë¡œ"],
    "ì—ì„œ": ["ì—", "ê°€", "ì´", "ì„", "ë¥¼", "ì˜", "ë¡œ", "ìœ¼ë¡œ"],
    "ë¡œ": ["ìœ¼ë¡œ", "ê°€", "ì´", "ì„", "ë¥¼", "ì˜", "ì—", "ì—ì„œ"],
    "ìœ¼ë¡œ": ["ë¡œ", "ê°€", "ì´", "ì„", "ë¥¼", "ì˜", "ì—", "ì—ì„œ"],
    
    # ë¶ˆìš©ì–´ (ê²€ìƒ‰ì—ì„œ ì œì™¸í•  ë‹¨ì–´ë“¤)
    "ë“¤ì–´ê°„": ["í¬í•¨ëœ", "ì‚¬ìš©ëœ", "ë„£ì€"],
    "ë§Œë“œëŠ”": ["ë§Œë“ ", "ì œì¡°í•˜ëŠ”", "ì¡°ë¦¬í•˜ëŠ”"],
    "ìŒì‹": ["ìš”ë¦¬", "ì‹í’ˆ", "ë©”ë‰´"],
    "ì‹ë‹¨": ["ì‹ì‚¬", "ë©”ë‰´", "ìš”ë¦¬"],
    "ìš”ë¦¬": ["ìŒì‹", "ì‹í’ˆ", "ë©”ë‰´"],
    "ë§Œë“¤ê¸°": ["ë§Œë“¤", "ì œì¡°", "ì¡°ë¦¬"],
    "ë°©ë²•": ["ê¸°ë²•", "ìš”ë ¹", "íŒ"],
    "ë ˆì‹œí”¼": ["ì¡°ë¦¬ë²•", "ë§Œë“œëŠ”ë²•", "ë°©ë²•"]
}

# ì—­ë°©í–¥ ë™ì˜ì–´ ì‚¬ì „ (ë™ì˜ì–´ -> ë©”ì¸ í‚¤ì›Œë“œ)
REVERSE_SYNONYM_DICT = {}
for main_keyword, synonyms in SYNONYM_DICT.items():
    for synonym in synonyms:
        REVERSE_SYNONYM_DICT[synonym] = main_keyword

def expand_query_with_synonyms(query: str) -> str:
    """
    ì¿¼ë¦¬ë¥¼ ë™ì˜ì–´ë¡œ í™•ìž¥í•˜ì—¬ ê²€ìƒ‰ ì„±ëŠ¥ í–¥ìƒ
    
    Args:
        query: ì›ë³¸ ê²€ìƒ‰ ì¿¼ë¦¬
        
    Returns:
        ë™ì˜ì–´ê°€ í¬í•¨ëœ í™•ìž¥ëœ ì¿¼ë¦¬
    """
    expanded_terms = []
    query_terms = query.split()
    
    for term in query_terms:
        # ì›ë³¸ ë‹¨ì–´ ì¶”ê°€
        expanded_terms.append(term)
        
        # ë™ì˜ì–´ ì¶”ê°€
        if term in SYNONYM_DICT:
            expanded_terms.extend(SYNONYM_DICT[term])
        elif term in REVERSE_SYNONYM_DICT:
            main_keyword = REVERSE_SYNONYM_DICT[term]
            expanded_terms.append(main_keyword)
            expanded_terms.extend(SYNONYM_DICT[main_keyword])
    
    return " ".join(expanded_terms)

def normalize_query(query: str) -> str:
    """
    ì¿¼ë¦¬ ì •ê·œí™” (ë™ì˜ì–´ í†µí•©)
    
    Args:
        query: ì›ë³¸ ê²€ìƒ‰ ì¿¼ë¦¬
        
    Returns:
        ì •ê·œí™”ëœ ì¿¼ë¦¬ (ë©”ì¸ í‚¤ì›Œë“œë¡œ í†µí•©)
    """
    normalized_terms = []
    query_terms = query.split()
    
    for term in query_terms:
        if term in REVERSE_SYNONYM_DICT:
            # ë™ì˜ì–´ë¥¼ ë©”ì¸ í‚¤ì›Œë“œë¡œ ë³€í™˜
            normalized_terms.append(REVERSE_SYNONYM_DICT[term])
        else:
            # ë©”ì¸ í‚¤ì›Œë“œì´ê±°ë‚˜ ë§¤í•‘ë˜ì§€ ì•Šì€ ë‹¨ì–´ëŠ” ê·¸ëŒ€ë¡œ ìœ ì§€
            normalized_terms.append(term)
    
    return " ".join(normalized_terms)

def get_synonyms(keyword: str) -> list:
    """
    íŠ¹ì • í‚¤ì›Œë“œì˜ ë™ì˜ì–´ ë¦¬ìŠ¤íŠ¸ ë°˜í™˜
    
    Args:
        keyword: ê²€ìƒ‰í•  í‚¤ì›Œë“œ
        
    Returns:
        ë™ì˜ì–´ ë¦¬ìŠ¤íŠ¸
    """
    if keyword in SYNONYM_DICT:
        return SYNONYM_DICT[keyword]
    elif keyword in REVERSE_SYNONYM_DICT:
        main_keyword = REVERSE_SYNONYM_DICT[keyword]
        return [main_keyword] + SYNONYM_DICT[main_keyword]
    else:
        return [keyword]

def test_synonym_functions():
    """ë™ì˜ì–´ í•¨ìˆ˜ë“¤ í…ŒìŠ¤íŠ¸"""
    test_queries = [
        "ì˜¬ë¦¬ë¸Œìœ  íŒŒìŠ¤íƒ€",
        "ì˜¬ë¦¬ë¸Œì˜¤ì¼ ìƒëŸ¬ë“œ", 
        "ë§ˆëŠ˜ ë³¶ìŒë°¥",
        "ê³„ëž€ ìŠ¤í¬ëž¨ë¸”",
        "ì•„ë³´ì¹´ë„ê°€ ë“¤ì–´ê°„ ê±´ê°•í•œ ìŒì‹",
        "keto ë‹¤ì´ì–´íŠ¸",
        "ì €íƒ„ìˆ˜í™”ë¬¼ ìš”ë¦¬"
    ]
    
    print("ðŸ§ª ë™ì˜ì–´ ì‚¬ì „ í…ŒìŠ¤íŠ¸")
    print("=" * 60)
    
    for query in test_queries:
        print(f"\nì›ë³¸ ì¿¼ë¦¬: '{query}'")
        print(f"ì •ê·œí™”:    '{normalize_query(query)}'")
        print(f"í™•ìž¥:      '{expand_query_with_synonyms(query)}'")
        
        # ê°œë³„ í‚¤ì›Œë“œ ë™ì˜ì–´ í™•ì¸
        terms = query.split()
        for term in terms:
            synonyms = get_synonyms(term)
            if len(synonyms) > 1:
                print(f"  '{term}' â†’ {synonyms}")

if __name__ == "__main__":
    test_synonym_functions()
